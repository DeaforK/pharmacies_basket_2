import {
  require_react_dom
} from "./chunk-VJA3Q2RH.js";
import {
  require_react
} from "./chunk-TJE776R7.js";
import {
  __toESM
} from "./chunk-WOOG5QLI.js";

// node_modules/ymap3-components/dist/index.mjs
var import_react = __toESM(require_react(), 1);
var import_react_dom = __toESM(require_react_dom(), 1);
var c = ((e) => (e.CartesianProjection = "@yandex/ymaps3-cartesian-projection@0.0.1", e.Clusterer = "@yandex/ymaps3-clusterer@0.0.1", e.Controls = "@yandex/ymaps3-controls@0.0.1", e.Hint = "@yandex/ymaps3-hint@0.0.1", e.Markers = "@yandex/ymaps3-markers@0.0.1", e.SphericalMercatorProjection = "@yandex/ymaps3-spherical-mercator-projection@0.0.1", e))(c || {});
var C = (0, import_react.createContext)({});
var H = (0, import_react.createContext)({
  hint: void 0
});
var L = ({
  children: e,
  context: t
}) => {
  const n = (0, import_react.useContext)(t);
  return import_react.default.createElement(H.Provider, { value: n }, e);
};
var B = ({ children: e, hint: t }) => {
  const { reactify: n, ymaps: y } = (0, import_react.useContext)(
    C
  ), [p, u] = (0, import_react.useState)(), s = (0, import_react.useMemo)(() => {
    if (p) {
      const o = window[c.Hint];
      return n.module(o).YMapHint;
    }
  }, [p]);
  return (0, import_react.useEffect)(() => {
    if (window[c.Hint]) {
      const o = window[c.Hint];
      u(n.module(o).YMapHintContext);
    } else
      y.import(c.Hint).then((o) => {
        window[c.Hint] = o, n.module(o) && u(n.module(o).YMapHintContext);
      });
  }, []), !s || !p || !e ? import_react.default.createElement(import_react.default.Fragment, null) : import_react.default.createElement(s, { hint: t }, import_react.default.createElement(L, { context: p }, e));
};
var x = typeof document < "u" ? import_react.useLayoutEffect : import_react.useEffect;
var b = import_react.default.forwardRef(({ gridSize: e, method: t, ...n }, y) => {
  const { reactify: p, ymaps: u } = (0, import_react.useContext)(
    C
  ), [s, o] = (0, import_react.useState)(), [m, i] = (0, import_react.useMemo)(() => {
    if (s) {
      const d = window[c.Clusterer];
      return [p.module(d).YMapClusterer, t || p.module(d).clusterByGrid];
    }
    return [];
  }, [s]);
  (0, import_react.useEffect)(() => {
    window[c.Clusterer] ? o(window[c.Clusterer]) : u.import(c.Clusterer).then((d) => {
      window[c.Clusterer] = d, o(d);
    });
  }, []);
  const l = (0, import_react.useMemo)(() => {
    if (i && e)
      return i({ gridSize: e });
  }, [i, e]);
  return !m || !l ? import_react.default.createElement(import_react.default.Fragment, null) : import_react.default.createElement(
    m,
    {
      ref: y,
      method: l,
      ...n
    }
  );
});
var S = class {
  constructor(t = "") {
    this.eventTarget = document.appendChild(document.createComment(t));
  }
  on(t, n) {
    this.eventTarget.addEventListener(t, n);
  }
  once(t, n) {
    this.eventTarget.addEventListener(t, n, { once: true });
  }
  off(t, n) {
    this.eventTarget.removeEventListener(t, n);
  }
  emit(t, n) {
    return this.eventTarget.dispatchEvent(new CustomEvent(t, { detail: n }));
  }
};
var E = new S("ymaps3-components");
var R = async ({
  key: e,
  lang: t = "ru_RU",
  coordorder: n,
  mode: y,
  apiKeys: p
}) => new Promise(async (u, s) => {
  try {
    if (window.ymaps3) {
      const o = window.ymaps3;
      await o.ready;
      const i = (await o.import("@yandex/ymaps3-reactify")).reactify.bindTo(import_react.default, import_react_dom.default);
      u({
        ymaps: o,
        reactify: i
      });
    } else {
      const o = document.createElement("script");
      document.body.appendChild(o), o.type = "text/javascript";
      const m = new URLSearchParams({
        apikey: e,
        lang: t
      });
      n && m.set("coordorder", n), y && m.set("mode", y), o.src = `https://api-maps.yandex.ru/v3/?${m.toString()}`, o.onload = async () => {
        const i = window.ymaps3;
        await i.ready, p && i.getDefaultConfig().setApikeys(p);
        const d = (await i.import("@yandex/ymaps3-reactify")).reactify.bindTo(import_react.default, import_react_dom.default);
        u({
          ymaps: i,
          reactify: d
        });
      }, o.onerror = s;
    }
  } catch {
  }
});
var T = ({
  apiKey: e,
  lang: t,
  coordorder: n,
  mode: y,
  children: p,
  onLoad: u,
  onError: s,
  apiKeys: o
}) => {
  const [m, i] = (0, import_react.useState)();
  return x(() => {
    R({ key: e, lang: t, coordorder: n, mode: y, apiKeys: o }).then((l) => {
      i(l), u == null || u(l), E.emit("ready");
    }).catch((l) => {
      s == null || s(l);
    });
  }, []), m ? import_react.default.createElement(C.Provider, { value: m }, p) : import_react.default.createElement(import_react.default.Fragment, null);
};
var G = import_react.default.memo(T);
function a(e, t) {
  let n;
  const y = ({ ...p }, u) => {
    const { reactify: s, ymaps: o } = (0, import_react.useContext)(
      C
    ), [m, i] = (0, import_react.useState)(false);
    return x(() => {
      t ? window[t] ? (i(true), n = s.module(window[t])[e]) : o.import(t).then((l) => {
        window[t] = l, s.module(l) && (i(true), n = s.module(l)[e]);
      }) : (n = s.module(o)[e], i(true));
    }, []), !n || !m ? null : import_react.default.createElement(n, { ref: u, ...p });
  };
  return import_react.default.forwardRef(y);
}
var g = a("YMapGeolocationControl", c.Controls);
var I = a("YMapZoomControl", c.Controls);
var O = a("YMapClusterer", c.Clusterer);
var U = a("YMapDefaultMarker", c.Markers);
var Z = a("YMap");
var k = a("YMapTileDataSource");
var q = a("ThemeContext");
var A = a("YMapControl");
var W = a("YMapLayer");
var _ = a("YMapMarker");
var $ = a("YMapDefaultSchemeLayer");
var J = a("YMapDefaultFeaturesLayer");
var P = a("YMapDefaultSatelliteLayer");
var Q = a("YMapListener");
var V = a("YMapControls");
var X = a("YMapControlButton");
var z = a("YMapContainer");
var K = a("YMapCollection");
var N = a("YMapFeature");
var ee = a("YMapFeatureDataSource");
var te = () => new Promise((e) => {
  if (window.ymaps3) {
    const t = window.ymaps3;
    t.ready.then(() => e(t));
  } else
    E.once("ready", () => {
      e(window.ymaps3);
    });
});
export {
  q as ThemeContext,
  Z as YMap,
  O as YMapClusterer,
  K as YMapCollection,
  G as YMapComponentsProvider,
  z as YMapContainer,
  A as YMapControl,
  X as YMapControlButton,
  V as YMapControls,
  b as YMapCustomClusterer,
  J as YMapDefaultFeaturesLayer,
  U as YMapDefaultMarker,
  P as YMapDefaultSatelliteLayer,
  $ as YMapDefaultSchemeLayer,
  N as YMapFeature,
  ee as YMapFeatureDataSource,
  g as YMapGeolocationControl,
  B as YMapHint,
  H as YMapHintContext,
  W as YMapLayer,
  Q as YMapListener,
  _ as YMapMarker,
  k as YMapTileDataSource,
  I as YMapZoomControl,
  te as getYmaps3ReadyObject
};
//# sourceMappingURL=ymap3-components.js.map
